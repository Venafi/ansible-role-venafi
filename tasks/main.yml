---
- name: "Include vars of {{ credentials_file }} into the venafi variable."
  include_vars:
    file: "{{ credentials_file }}"
    name: venafi

- name: "show execution mode"
  debug:
    msg: "certificate_remote_execution is {{ certificate_remote_execution }}"

- import_tasks: local-certificate.yml
  when: not certificate_remote_execution and not is_policy_spec_task

- import_tasks: remote-certificate.yml
  when: certificate_remote_execution and not is_policy_spec_task

- import_tasks: get-policy.yml
  when: is_policy_spec_task and policy_spec_action == 'get'

- import_tasks: set-policy.yml
  when: is_policy_spec_task and policy_spec_action == 'set'
