---
- name: "Bring up docker containers for docker connection inventory iface"
  hosts: localhost
  roles:
    - role: provision_docker
      provision_docker_privileged: true,
      provision_docker_inventory_group: "{{ groups['robots'] }}"
      provision_docker_use_docker_connection: true

- hosts: robots
  tasks:
    - name: "Say hello to my new containers"
      ping:

#    - name: "Install dependencies"
#      apt:
#        name:
#          - python
#          - python-pip
#          - python-setuptools

    - name: "Install required pip packages"
      pip:
        name:
          - vcert

#    - name: "Enroll fake certificate"
    - venafi_certificate:
        test_mode: true
        cert_path: "/tmp/fake.venafi.example.cert.pem"
        privatekey_path: "/tmp/fake.venafi.example.cert.key"
        privatekey_type: "RSA"
        privatekey_size: 8192
        privatekey_passphrase: "password"
        common_name: "fake.venafi.example.com"
        mode: "u=rwx,g=rwx,o=rwx"